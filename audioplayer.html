<html> <!--A PUSHER SUR LE GIT-->
    <style type="text/css">
        #navlist{position:relative;}
        #navlist li{margin:0;padding:0;list-style:none;position:absolute;top:0;}
        #navlist li,#navlist a{height:60px;display:block;}
        #play1{left:0px;width:47px;}
        #play1{background-image:url("./resources/play.jpeg"); border:black; border-width: 1px; width:100; height:100px!important; background-repeat:no-repeat; background-size:100px 100px}
    </style>

	<head>
		<script type="text/javascript">
            

            function onload(){
                var state = true
                var audio = document.getElementById("son1");
                var canvas = document.getElementById("myCanvas");

                function init()
                {   
                
                }
            
            
                function play(){
                    if (state){
                        audio.play()
                        state = false
                    } else { //Remise a zero
                        audio.pause()
                        audio.currentTime = 0
                        state = true
                    }
                    
                }

                var buttonPlay = document.getElementById("play1");
                buttonPlay.onclick = play; //binding de l'événement onclick sur la methode play 
                

                function eventListenerProgress(){
                    //console.log("progress")
                    var ctx = canvas.getContext("2d");
                    percent = audio.currentTime/audio.duration
                    drawArcBar(ctx, percent);
                    //drawLineBar(ctx, percent);
                }
                audio.addEventListener("timeupdate",eventListenerProgress) //attache un listener a l'objet audio sur l'événement timeupdate
                
                function drawLineBar(context, percent){
                    console.log(percent);
                    clearCanvas(context)
                    context.moveTo(0,0); //(x,y)
                    context.lineTo(200*percent, 0);
                    context.stroke();
                    //console.log((audio.currentTime/audio.duration));
                }

                function drawArcBar(context, percent){
                    clearCanvas(context)
                    context.arc(50, 50, 30, 0, percent*2*Math.PI, false);
                    context.stroke()
                }

                function clearCanvas(context){
                    context.clearRect(0,0, canvas.width, canvas.height); //nettoie le canevas
                    context.beginPath(); //nettoie la pile de traits stockés dans le contexte
                }
            }
		</script>
	</head>
	 
	<body onload='onload()'>
        <audio id = "son1" src="resources/cracklingFire.wav"></audio>
        <canvas id="myCanvas" width="200" height="200"></canvas>
		<ul id="navlist">
			<li id="play1">
        </ul>
        
	</body>
	
</html>
